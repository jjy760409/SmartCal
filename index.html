<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>SmartCal AI - Caloro 카메라 칼로리 스캐너</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app-shell">
    <!-- 상단 헤더 -->
    <header class="app-header">
      <div class="logo-wrap">
        <div class="logo-dot"></div>
        <span class="logo-text">
          SmartCal <span class="logo-ai">AI</span>
        </span>
      </div>
      <div class="badge-area">
        <!-- 무료 / 무제한 뱃지 -->
        <span
          id="usageBadge"
          class="pill pill-free"
          data-role="usageBadge"
        >
          FREE 3회
        </span>
      </div>
    </header>

    <!-- 자동 언어 슬로건 -->
    <p id="sloganText" class="slogan"></p>

    <main class="app-main">
      <!-- 상단 안내 영역 -->
      <section class="hero">
        <p
          id="usageText"
          class="usage-text"
          data-role="usageText"
        >
          오늘은 무료로 3번까지 촬영해 볼 수 있어요. 📷
        </p>
        <p
          id="message"
          class="helper-text"
          data-role="message"
        >
          카메라를 음식 쪽으로 향해 주세요. 📷
        </p>
      </section>

      <!-- 카메라 영역 -->
      <section class="camera-card glass-card">
        <div class="camera-frame">
          <video id="video" autoplay playsinline></video>
          <canvas id="canvas" class="hidden"></canvas>

          <!-- 촬영 안내 오버레이 -->
          <div
            id="guideOverlay"
            class="guide-overlay"
          >
            <div class="guide-box"></div>
            <p class="guide-text">
              음식이 가운데 초록 박스 안에 보이도록 맞춰주세요. 🥗
            </p>
          </div>
        </div>

        <div class="camera-actions">
          <button
            id="switchCameraBtn"
            class="btn secondary"
          >
            카메라 전환 🔄
          </button>
          <button
            id="captureBtn"
            class="btn primary"
          >
            촬영하고 칼로리 분석하기 ⚡
          </button>
        </div>
      </section>

      <!-- 분석 결과 영역 -->
      <section
        id="resultSection"
        class="result-card glass-card hidden"
        data-role="resultSection"
      >
        <h2 class="section-title">이번 한 끼 분석 결과</h2>

        <div class="result-main">
          <div class="result-food">
            <span class="label">음식</span>
            <span
              id="foodName"
              class="value"
              data-role="foodName"
            >
              -
            </span>
          </div>
          <div class="result-kcal">
            <span class="label">예상 칼로리</span>
            <span
              id="calorieValue"
              class="kcal-value"
              data-role="calorieValue"
            >
              0
            </span>
            <span class="kcal-unit">kcal</span>
          </div>
        </div>

        <p
          id="resultNote"
          class="result-note"
          data-role="resultNote"
        >
          이미지를 AI 서버로 보내 분석한 결과입니다. 아직은 베타 버전이에요. 🙂
        </p>
      </section>

      <!-- 오늘 섭취 기록 영역 -->
      <section
        id="historySection"
        class="history-card glass-card hidden"
        data-role="historySection"
      >
        <div class="history-header">
          <div>
            <h2
              id="historyDateLabel"
              class="section-title"
              data-role="historyDateLabel"
            >
              오늘 섭취 기록
            </h2>
            <p class="history-sub">
              하루 동안 찍은 음식들이 자동으로 기록됩니다.
            </p>
          </div>
          <button
            id="historyClearBtn"
            class="link-btn"
            data-role="historyClearBtn"
          >
            기록 비우기
          </button>
        </div>

        <ul
          id="historyList"
          class="history-list"
          data-role="historyList"
        ></ul>

        <div class="history-footer">
          <span class="label">오늘 총 섭취 칼로리</span>
          <span
            id="historyTotal"
            class="kcal-total"
            data-role="historyTotal"
          >
            0
          </span>
          <span class="kcal-unit">kcal</span>
        </div>
      </section>

      <!-- PWA 설치 & 아이콘 스타일 선택 -->
      <section class="install-card glass-card">
        <h2 class="section-title">📲 스마트폰에 설치해서 쓰기</h2>
        <p class="install-text">
          홈 화면에 추가하면 앱처럼 1초 만에 실행할 수 있어요.
        </p>

        <!-- 아이콘 스타일 선택 -->
        <div class="icon-style-grid">
          <button
            class="icon-style"
            data-icon="A"
          >
            <span class="icon-preview icon-a"></span>
            <span class="icon-label">A. 블루 + AI 광택</span>
          </button>
          <button
            class="icon-style"
            data-icon="B"
          >
            <span class="icon-preview icon-b"></span>
            <span class="icon-label">B. 헬스/야채 느낌</span>
          </button>
          <button
            class="icon-style"
            data-icon="C"
          >
            <span class="icon-preview icon-c"></span>
            <span class="icon-label">C. 귀엽고 친근 캐릭터(칼로로)</span>
          </button>
          <button
            class="icon-style"
            data-icon="D"
          >
            <span class="icon-preview icon-d"></span>
            <span class="icon-label">D. 블랙 하이엔드</span>
          </button>
        </div>

        <!-- PWA 설치 버튼 -->
        <button
          id="installBtn"
          class="btn outline install-btn"
          style="display:none;"
        >
          📥 스마트폰에 SmartCal AI 설치하기
        </button>
      </section>
    </main>

    <!-- 구독 모달 -->
    <div
      id="subscriptionModal"
      class="modal-backdrop hidden"
      data-role="subscriptionModal"
    >
      <div class="modal">
        <div class="modal-header">
          <h2>SmartCal AI Premium</h2>
          <p class="modal-subtitle">
            정확한 기록은 최고의 다이어트입니다.
          </p>
        </div>

        <div class="modal-body">
          <p class="modal-info">
            오늘 무료 체험(3회)을 모두 사용했어요. <br />
            무제한으로 편하게 쓰고 싶다면 구독을 선택해 주세요. 💚
          </p>

          <!-- 랜덤 CTA 문구 (app.js에서 자동 변경) -->
          <p
            id="ctaMessage"
            class="modal-cta"
          >
            지금 구독하면 칼로로가 평생 든든한 다이어트 친구가 되어 줄게요! 🥰
          </p>

          <!-- 요금제 카드 3종 -->
          <div class="plans-wrap">

            <!-- 기본 스타터 -->
            <div class="plan-card">
              <div class="plan-header">
                <span class="plan-name">Starter</span>
                <span class="plan-price">월 1,900원 (이벤트)</span>
              </div>
              <ul class="plan-list">
                <li>하루 10회 촬영 분석</li>
                <li>한식 기본 데이터 + 기록</li>
                <li>오늘 섭취 기록 자동 저장</li>
              </ul>
            </div>

            <!-- 가장 인기 있는 PRO -->
            <div class="plan-card plan-hot">
              <div class="plan-header">
                <span class="plan-name">PRO (추천)</span>
                <span class="plan-price">월 4,900원</span>
              </div>
              <ul class="plan-list">
                <li>무제한 카메라 칼로리 분석</li>
                <li>한식 / 일식 / 중식 / 디저트 매일 0시 자동 업데이트</li>
                <li>오늘 섭취 기록 + 총 섭취 칼로리 집계</li>
                <li>향후 모든 신규 기능 우선 제공</li>
              </ul>
            </div>

            <!-- 매니아/전문가용 -->
            <div class="plan-card">
              <div class="plan-header">
                <span class="plan-name">Ultra</span>
                <span class="plan-price">월 5,900원</span>
              </div>
              <ul class="plan-list">
                <li>AI 음식 추천 / 목표 칼로리 코칭</li>
                <li>주간·월간 리포트 PDF 자동 생성</li>
                <li>향후 “스마트 체중·운동 연동” 기능 포함</li>
              </ul>
            </div>

          </div>

          <!-- 결제 영역 -->
          <div class="pay-section">
            <p class="pay-label">결제 방법 선택</p>
            <div class="pay-grid">
              <!-- 실제 Iamport 결제 호출 (app.js에서 처리) -->
              <button
                class="btn pay kakao"
                data-pay="kakao"
              >
                카카오페이로 구독하기
              </button>

              <button
                class="btn pay toss"
                data-pay="toss"
              >
                토스로 구독하기
              </button>

              <button
                class="btn pay card"
                data-pay="card"
              >
                신용/체크 카드 결제
              </button>

              <button
                class="btn pay paypal"
                data-pay="paypal"
              >
                PayPal (Global)
              </button>
            </div>

            <!-- 사용자가 어떤 버튼 눌렀는지 + 상태 -->
            <p id="paySelected" class="pay-selected">
              아직 결제 수단을 선택하지 않았어요. 👀
            </p>

            <p class="pay-note">
              * 현재는 PG사 심사/연동 과정 중입니다.<br />
              * 결제 연동이 완료되면, 결제 후 <strong>1~3분 내 자동으로 “무제한 이용중”</strong>으로 전환됩니다.<br />
              * 실제 결제 승인·취소·환불은 <strong>포트원(Iamport) + 카드사 규정</strong>에 따라 안전하게 처리됩니다.
            </p>
          </div>

        </div>

        <div class="modal-footer">
          <button
            id="laterBtn"
            class="btn ghost"
          >
            나중에 할게요
          </button>
          <button
            id="closeModalBtn"
            class="btn flat"
          >
            닫기
          </button>
        </div>
      </div>
    </div>

    <!-- 하단 푸터 -->
    <footer class="app-footer">
      <span>© SmartCal AI · Caloro · All rights reserved.</span>
      <span class="footer-sub">
        사업자: 애그리넥서스월드(AgriNexus World) · 사업자등록번호: 382-14-02703
      </span>
    </footer>
  </div>

  <!-- Iamport 결제 스크립트 -->
  <script src="https://cdn.iamport.kr/v1/iamport.js"></script>
  <!-- 메인 스크립트 -->
  <script src="app.js"></script>
</body>
</html>
