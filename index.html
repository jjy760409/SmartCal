<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>SmartCal AI - Camera Calorie Scanner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div class="logo-wrap">
        <div class="logo-dot"></div>
        <span class="logo-text">SmartCal <span class="logo-ai">AI</span></span>
      </div>
      <div class="badge-area">
        <span id="usageBadge" class="pill pill-free">FREE 24H</span>
      </div>
    </header>

    <main class="app-main">
      <!-- 상단 안내 영역 -->
      <section class="hero">
        <p id="usageText" class="usage-text">
          무료 체험 남은 시간 계산 중...
        </p>
        <p id="message" class="helper-text">
          카메라를 음식 쪽으로 향해 주세요. 📷
        </p>
      </section>

      <!-- 카메라 영역 -->
      <section class="camera-card glass-card">
        <div class="camera-frame">
          <video id="video" autoplay playsinline></video>
          <canvas id="canvas" class="hidden"></canvas>
          <div id="guideOverlay" class="guide-overlay">
            <div class="guide-box"></div>
            <p class="guide-text">
              음식이 가운데 초록 박스 안에 보이도록 맞춰주세요. 🥗
            </p>
          </div>
        </div>
        <div class="camera-actions">
          <button id="switchCameraBtn" class="btn secondary">카메라 전환 🔄</button>
          <button id="captureBtn" class="btn primary">촬영하고 칼로리 분석하기 ⚡</button>
        </div>
      </section>

      <!-- 분석 결과 영역 -->
      <section id="resultSection" class="result-card glass-card hidden">
        <h2 class="section-title">이번 한 끼 분석 결과</h2>
        <div class="result-main">
          <div class="result-food">
            <span class="label">음식</span>
            <span id="foodName" class="value">-</span>
          </div>
          <div class="result-kcal">
            <span class="label">예상 칼로리</span>
            <span id="calorieValue" class="kcal-value">0</span>
            <span class="kcal-unit">kcal</span>
          </div>
        </div>
        <p id="resultNote" class="result-note">
          촬영한 이미지를 기반으로 대략적인 칼로리를 추정합니다.
        </p>
      </section>

      <!-- 오늘 섭취 기록 영역 -->
      <section id="historySection" class="history-card glass-card hidden">
        <div class="history-header">
          <div>
            <h2 id="historyDateLabel" class="section-title">오늘 섭취 기록</h2>
            <p class="history-sub">하루 동안 찍은 음식들이 자동으로 기록됩니다.</p>
          </div>
          <button id="historyClearBtn" class="link-btn">기록 비우기</button>
        </div>
        <ul id="historyList" class="history-list"></ul>
        <div class="history-footer">
          <span class="label">오늘 총 섭취 칼로리</span>
          <span id="historyTotal" class="kcal-total">0</span>
          <span class="kcal-unit">kcal</span>
        </div>
      </section>

      <!-- PWA 설치 & 아이콘 스타일 선택 -->
      <section class="install-card glass-card">
        <h2 class="section-title">📲 스마트폰에 설치해서 쓰기</h2>
        <p class="install-text">
          홈 화면에 추가하면 앱처럼 1초 만에 실행할 수 있어요.
        </p>
        <div class="icon-style-grid">
          <button class="icon-style" data-icon="A">
            <span class="icon-preview icon-a"></span>
            <span class="icon-label">A. 블루 + AI 광택</span>
          </button>
          <button class="icon-style" data-icon="B">
            <span class="icon-preview icon-b"></span>
            <span class="icon-label">B. 헬스/야채 느낌</span>
          </button>
          <button class="icon-style" data-icon="C">
            <span class="icon-preview icon-c"></span>
            <span class="icon-label">C. 귀엽고 친근 캐릭터</span>
          </button>
          <button class="icon-style" data-icon="D">
            <span class="icon-preview icon-d"></span>
            <span class="icon-label">D. 블랙 하이엔드</span>
          </button>
        </div>
        <button id="installBtn" class="btn outline install-btn" style="display:none;">
          📥 스마트폰에 SmartCal AI 설치하기
        </button>
      </section>
    </main>

    <!-- 구독 모달 -->
    <div id="subscriptionModal" class="modal-backdrop">
      <div class="modal">
        <div class="modal-header">
          <h2>SmartCal AI Premium</h2>
          <p class="modal-subtitle">정확한 기록은 최고의 다이어트입니다.</p>
        </div>
        <div class="modal-body">
          <p class="modal-info">
            무료 24시간 체험이 끝났어요. <br />
            계속 사용하시려면 구독을 선택해 주세요. 💚
          </p>
          <p id="ctaMessage" class="modal-cta">
            지금 구독하면 더 정확한 칼로리 인식이 가능합니다!
          </p>

          <div class="plan-card">
            <div class="plan-header">
              <span class="plan-name">SmartCal AI PRO</span>
              <span class="plan-price">월 4,900원</span>
            </div>
            <ul class="plan-list">
              <li>무제한 카메라 칼로리 분석</li>
              <li>한식/일식/중식/디저트 데이터 매일 0시 자동 업데이트</li>
              <li>오늘 섭취 기록 자동 저장 &amp; 총 칼로리 집계</li>
              <li>향후 모든 신규 기능 우선 제공</li>
            </ul>
          </div>

          <div class="pay-section">
            <p class="pay-label">결제 방법 선택</p>
            <div class="pay-grid">
              <button class="btn pay kakao" data-pay="kakao">카카오페이로 구독하기</button>
              <button class="btn pay toss" data-pay="toss">토스로 구독하기</button>
              <button class="btn pay card" data-pay="card">신용/체크 카드 결제</button>
              <button class="btn pay paypal" data-pay="paypal">PayPal (Global)</button>
            </div>
            <p class="pay-note">
              * 현재는 데모 모드입니다. 실제 결제 페이지는 곧 연결될 예정입니다.
            </p>
          </div>
        </div>
        <div class="modal-footer">
          <button id="laterBtn" class="btn ghost">나중에 할게요</button>
          <button id="closeModalBtn" class="btn flat">닫기</button>
        </div>
      </div>
    </div>

    <footer class="app-footer">
      <span>© SmartCal AI · All rights reserved.</span>
    </footer>
  </div>

  <script src="app.js"></script>
</body>
</html>
